<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/stylenav.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>

<div id="app">
    <!-- Background Section for Homepage -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 background" :style="{ backgroundImage: `url(${backgroundImage})` }">
                <p class="background-text">{{ displayedText }}</p>
            </div>
        </div>
    </div>

    <!-- Navigation Component -->
    <div id="nav-component"></div>
</div>

<!-- Scripts -->
<script src="./navbar.js" type="module"></script>


<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

<script type="module">

    const app = Vue.createApp({
        data() {
            return {
                fullText: "",
                displayedText: "",
                backgroundImage: "",
                typingSpeed: 100
            };
        },
        mounted() {
            this.startTypingEffect();
            this.getTimeAndSetBackground();
        },
        methods: {
            async getTimeAndSetBackground() {
                    try {
                        const response = await fetch("https://timeapi.io/api/time/current/coordinate?latitude=1.364917&longitude=103.822872");
                        const data = await response.json();
                        console.log(data);
                        
                        // Parse the datetime string to get the hour
                        // const dateTime = new Date(data.datetime);
                        const hour = data.hour;
                        console.log(hour);

                        // Determine time of day and set background and text
                        if (hour >= 6 && hour < 12) {
                            // Morning
                            this.fullText = "Good Morning, Rise and Shine";
                            this.backgroundImage = "./images/nav/morning3.png"; // Replace with your morning image path
                        } else if (hour >= 12 && hour < 18) {
                            // Afternoon
                            this.fullText = "Good Afternoon, It's Fun O'clock!";
                            this.backgroundImage = "./images/nav/afternoon.png"; // Replace with your afternoon image path
                        } else {
                            // Evening/Night
                            this.fullText = "Hello. The Night Is Still Young.";
                            this.backgroundImage = "./images/nav/night3.png"; // Replace with your evening/night image path
                        }

                        this.startTypingEffect(); // Start typing effect if needed
                    } catch (error) {
                        console.error("Error fetching time data:", error);
                    }
                },
                startTypingEffect() {
                    let index = 0;
                    this.displayedText = "";

                    // Clear any existing interval to prevent overlap
                    if (this.typingInterval) {
                        clearInterval(this.typingInterval);
                    }

                    // Start the typing interval
                    this.typingInterval = setInterval(() => {
                        this.displayedText += this.fullText.charAt(index);
                        index++;

                        // Stop the interval when the text is fully typed
                        if (index === this.fullText.length) {
                            clearInterval(this.typingInterval);
                        }
                    }, this.typingSpeed);
                },
        }
    }).mount('#app');
</script>

</body>
</html>
